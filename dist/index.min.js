function e(e){return e&&"function"==typeof e}function n(n){return!!n&&e(n.resolve)&&e(n.setLifetime)&&e(n.scoped)&&e(n.transient)&&e(n.singleton)}function t(e){return n(e)||function(e){return!!e&&"boolean"==typeof e.isLeakSafe}(e)}let r,i={resolvedDependencies:{},dependencies:{awilix:{get:()=>i.importModule("awilix",(()=>"https://esm.run/awilix@10.0.1/lib/awilix.browser.js"))}},importModule:async function(e,n=((e,n)=>`https://esm.run/${e}`)){let t,r="undefined"!=typeof process&&process?.versions?.node;try{new URL(e),t=!0}catch(e){t=!1}if(t&&r)throw new Error("You cannot import url modules via node.");if(r)return await import(e);return await import(t?e:n(e,i))}},o=0,s=0;async function c(e={}){const n={...i,...e};if(o++)return a;if(s++)return new Promise((e=>{const n=setInterval((()=>{s||(e(a),clearInterval(n))}),100)}));const{dependencies:t}=n;return r=await t.awilix.get(),a}function a(n,t,r={}){if(!o)throw new Error("Install before using simplified-awilix");const{existingContainer:i,handleUnregistered:s,config:c}=[n,t,r].reduce(((n,t)=>{var r;return e(t)?n.handleUnregistered=t:(r=t)&&e(r.register)&&e(r.createScope)&&r.cradle?n.existingContainer=t:n.config=t,n}),{});return l({container:i,handleUnregistered:s,config:c})}function l(i={}){let{AwilixResolutionError:o,config:s,createContainer:c,asFunction:a,asValue:u,aliasTo:f,container:d,handleUnregistered:p=(()=>{})}={...r,...i};d||(d=c?.(s));let g=d.cradle;const w=d._createScope||=d.createScope,h=d._register||=d.register;function m(r,i="transient",o){"string"==typeof r&&(r={[r]:i},i=o||"transient");for(const[o,s]of Object.entries(r)){let r=s;if("object"==typeof s&&!t(s)&&e(s?.resolver)||n(s?.resolver)){const{resolver:n,disposer:t,inject:c,injector:l=c,type:u,lifetime:f=u||i}=s;r=a(n),e(t)&&(r=r.disposer(t)),e(l)&&(r=r.inject(t)),h(o,r[f]())}else t(r)?r.resolve&&!r[i]?h(o,r):h(o,r[i]()):e(r)?h(o,a(r)[i]()):h(o,u(r))}return d}return Object.defineProperty(d,"cradle",{get:()=>new Proxy(g,{get(e,n){try{return e[n]}catch(e){if(e instanceof o||e.message.startsWith("Could not resolve"))return p(n,d.cradle);throw e}}})}),function(e,...n){const t=n.length;if(t<1||null==e)return e;for(let r=0;r<t;r++){const t=n[r];for(const n in t)e[n]=t[n]}return e}(d,{register:m,registerTransient:function(...e){return m(...e,"transient")},registerScoped:function(...e){return m(...e,"scoped")},registerSingleton:function(...e){return m(...e,"singleton")},createScope:function(e=p){return l({AwilixResolutionError:o,createContainer:c,asFunction:a,asValue:u,aliasTo:f,container:w(),handleUnregistered:e})}})}export{i as configuration,a as createContainer,a as default,c as install};
