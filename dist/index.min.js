function e(e){return e&&"function"==typeof e}function n(n){return e(n?.setLifetime)&&e(n?.scoped)&&e(n?.transient)&&e(n?.singleton)}let t,r={resolvedDependencies:{},dependencies:{awilix:{get:()=>r.importModule("awilix",(()=>"https://esm.run/awilix@10.0.1/lib/awilix.browser.js"))}},importModule:async function(e,n=((e,n)=>`https://esm.run/${e}`)){let t,i="undefined"!=typeof process&&process?.versions?.node;try{new URL(e),t=!0}catch(e){t=!1}if(t&&i)throw new Error("You cannot import url modules via node.");if(i)return await import(e);return await import(t?e:n(e,r))}},i=0,o=0;async function c(e={}){const n={...r,...e};if(i++)return s;if(o++)return new Promise((e=>{const n=setInterval((()=>{o||(e(s),clearInterval(n))}),100)}));const{dependencies:c}=n;return t=await c.awilix.get(),s}function s(n,t,r={}){if(!i)throw new Error("Install before using simplified-awilix");const{existingContainer:o,handleUnregistered:c,config:s}=[n,t,r].reduce(((n,t)=>{var r;return e(t)?n.handleUnregistered=t:(r=t)&&e(r.register)&&e(r.createScope)&&r.cradle?n.existingContainer=t:n.config=t,n}),{});return a({container:o,handleUnregistered:c,config:s})}function a(r={}){let{config:i,createContainer:o,asFunction:c,asValue:s,aliasTo:u,container:l,handleUnregistered:f=(()=>{})}={...t,...r};l||(l=o?.(i));let d=l.cradle;const g=l._createScope||=l.createScope,p=l._register||=l.register;function w(t,r="transient"){for(const[i,o]of Object.entries(t))n(o)?p(i,o[r]()):e(o)?p(i,c(o)[r]()):p(i,s(o));return l}return Object.defineProperty(l,"cradle",{get:()=>new Proxy({},{get(e,n){try{return d[n]}catch(e){return f(n,l.cradle)}}})}),function(e,...n){const t=n.length;if(t<1||null==e)return e;for(let r=0;r<t;r++){const t=n[r];for(const n in t)e[n]=t[n]}return e}(l,{register:w,registerTransient:function(e){return w(e,"transient")},registerScoped:function(e){return w(e,"scoped")},registerSingleton:function(e){return w(e,"singleton")},createScope:function(e=f){return a({createContainer:o,asFunction:c,asValue:s,aliasTo:u,container:g(),handleUnregistered:e})}})}export{r as configuration,s as createContainer,s as default,c as install};
